<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>SCAMP-5c SPI Interface: scamp5c_spi Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doc_style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="scamp5c_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SCAMP-5c SPI Interface
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
   <div id="projectbrief">SCAMP-5c is connected to the flight computer via a SPI interface</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="classes.html"><span>Data&#160;Structure&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Data&#160;Fields</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Data Fields</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-static-methods">Static Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a>  </div>
  <div class="headertitle">
<div class="title">scamp5c_spi Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>the object-oriented interface of the spi bus  
 <a href="a00001.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="a00010_source.html">scamp5c_spi.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for scamp5c_spi:</div>
<div class="dyncontent">
 <div class="center">
  <img src="a00001.png" usemap="#scamp5c_spi_map" alt=""/>
  <map id="scamp5c_spi_map" name="scamp5c_spi_map">
<area href="a00002.html" title="this interface uses the data-ready pin to trigger transfers. " alt="scamp5c_spi_ht" shape="rect" coords="0,56,108,80"/>
<area href="a00003.html" title="this interface will dynamically change the transfer size to adapt payload size. " alt="scamp5c_spi_vts" shape="rect" coords="0,112,108,136"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a76a5d8a500041d2514a3b0dd720adf03"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00001.html#a76a5d8a500041d2514a3b0dd720adf03">OpenSPI</a> (const char *dev_path, uint32_t d_clk=2500000)</td></tr>
<tr class="memdesc:a76a5d8a500041d2514a3b0dd720adf03"><td class="mdescLeft">&#160;</td><td class="mdescRight">open the spi interface  <a href="#a76a5d8a500041d2514a3b0dd720adf03">More...</a><br /></td></tr>
<tr class="separator:a76a5d8a500041d2514a3b0dd720adf03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6fa24ac0fd29b15bff7e629df59bb9ce"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6fa24ac0fd29b15bff7e629df59bb9ce"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00001.html#a6fa24ac0fd29b15bff7e629df59bb9ce">CloseSPI</a> (void)</td></tr>
<tr class="memdesc:a6fa24ac0fd29b15bff7e629df59bb9ce"><td class="mdescLeft">&#160;</td><td class="mdescRight">close the spi interface <br /></td></tr>
<tr class="separator:a6fa24ac0fd29b15bff7e629df59bb9ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5191ec15c3cdc6f37ed45bc07b1e1815"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00001.html#a5191ec15c3cdc6f37ed45bc07b1e1815">StartThreads</a> ()</td></tr>
<tr class="memdesc:a5191ec15c3cdc6f37ed45bc07b1e1815"><td class="mdescLeft">&#160;</td><td class="mdescRight">start running the internal functions in different threads  <a href="#a5191ec15c3cdc6f37ed45bc07b1e1815">More...</a><br /></td></tr>
<tr class="separator:a5191ec15c3cdc6f37ed45bc07b1e1815"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a6da7cea09fe19b8ba35ce5385371c0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00001.html#a8a6da7cea09fe19b8ba35ce5385371c0">EndThreads</a> ()</td></tr>
<tr class="memdesc:a8a6da7cea09fe19b8ba35ce5385371c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">stop the interface and close all threads created in the background  <a href="#a8a6da7cea09fe19b8ba35ce5385371c0">More...</a><br /></td></tr>
<tr class="separator:a8a6da7cea09fe19b8ba35ce5385371c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33e916a57e80d2792ea3674d96bf43ff"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a33e916a57e80d2792ea3674d96bf43ff"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>ResetAllCounters</b> ()</td></tr>
<tr class="separator:a33e916a57e80d2792ea3674d96bf43ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d9dbbdc2ceb8212eb916edd7bc951fb"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8d9dbbdc2ceb8212eb916edd7bc951fb"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>GetTriggerCounter</b> ()</td></tr>
<tr class="separator:a8d9dbbdc2ceb8212eb916edd7bc951fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0cb40dac4bb6215a0208d5fbe6655c45"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0cb40dac4bb6215a0208d5fbe6655c45"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>GetTxSwapCounter</b> ()</td></tr>
<tr class="separator:a0cb40dac4bb6215a0208d5fbe6655c45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3105f48e02da1e2bdea0893375d4281b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3105f48e02da1e2bdea0893375d4281b"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>GetTransferCounter</b> ()</td></tr>
<tr class="separator:a3105f48e02da1e2bdea0893375d4281b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0b58deaa307228b127841ac90c2f2e8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae0b58deaa307228b127841ac90c2f2e8"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>GetSignatureCounter</b> ()</td></tr>
<tr class="separator:ae0b58deaa307228b127841ac90c2f2e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a898e71c43af67297d89536b931e6addf"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a898e71c43af67297d89536b931e6addf"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>GetHeaderCounter</b> ()</td></tr>
<tr class="separator:a898e71c43af67297d89536b931e6addf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af273b85c501e7a00cc3e512000081f33"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af273b85c501e7a00cc3e512000081f33"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>GetPacketCounter</b> ()</td></tr>
<tr class="separator:af273b85c501e7a00cc3e512000081f33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9fb26dc19a556e8bec9254b623ac3cd"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad9fb26dc19a556e8bec9254b623ac3cd"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>SetTransferSize</b> (uint32_t s)</td></tr>
<tr class="separator:ad9fb26dc19a556e8bec9254b623ac3cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07b1f658247c934c8618f86ccb52d4c7"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a07b1f658247c934c8618f86ccb52d4c7"></a>
size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00001.html#a07b1f658247c934c8618f86ccb52d4c7">GetPacketQueueLength</a> ()</td></tr>
<tr class="memdesc:a07b1f658247c934c8618f86ccb52d4c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">get the number of packet in the packet queue <br /></td></tr>
<tr class="separator:a07b1f658247c934c8618f86ccb52d4c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fe27cca3676682cd762a4a2bb1d2323"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9fe27cca3676682cd762a4a2bb1d2323"></a>
packet *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00001.html#a9fe27cca3676682cd762a4a2bb1d2323">PopPacketFromQueue</a> ()</td></tr>
<tr class="memdesc:a9fe27cca3676682cd762a4a2bb1d2323"><td class="mdescLeft">&#160;</td><td class="mdescRight">get a packet from the queue as the packet is removed from queue <br /></td></tr>
<tr class="separator:a9fe27cca3676682cd762a4a2bb1d2323"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a962e7c089149fc7183fed203cd1e5f7f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a962e7c089149fc7183fed203cd1e5f7f"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00001.html#a962e7c089149fc7183fed203cd1e5f7f">DeletePacket</a> (packet *p)</td></tr>
<tr class="memdesc:a962e7c089149fc7183fed203cd1e5f7f"><td class="mdescLeft">&#160;</td><td class="mdescRight">delete a packet taken from the packet queue <br /></td></tr>
<tr class="separator:a962e7c089149fc7183fed203cd1e5f7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a424803cf163b98bcd999b465d792340c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a424803cf163b98bcd999b465d792340c"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00001.html#a424803cf163b98bcd999b465d792340c">OpenTxBuffer</a> ()</td></tr>
<tr class="memdesc:a424803cf163b98bcd999b465d792340c"><td class="mdescLeft">&#160;</td><td class="mdescRight">gain access to the transmit buffer <br /></td></tr>
<tr class="separator:a424803cf163b98bcd999b465d792340c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88fe2db63ccb268965b45377caae41f4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a88fe2db63ccb268965b45377caae41f4"></a>
uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00001.html#a88fe2db63ccb268965b45377caae41f4">GetTxBuffer</a> ()</td></tr>
<tr class="memdesc:a88fe2db63ccb268965b45377caae41f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">get the pointer to the transmit buffer thus modify the content in it <br /></td></tr>
<tr class="separator:a88fe2db63ccb268965b45377caae41f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae98bff7574c45884fbb75f22ddd158c0"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae98bff7574c45884fbb75f22ddd158c0"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00001.html#ae98bff7574c45884fbb75f22ddd158c0">CloseTxBuffer</a> ()</td></tr>
<tr class="memdesc:ae98bff7574c45884fbb75f22ddd158c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">release access to the transmit buffer <br /></td></tr>
<tr class="separator:ae98bff7574c45884fbb75f22ddd158c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Data Fields</h2></td></tr>
<tr class="memitem:a72dd7d2ab7294c433ecada564cbd4f1a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a72dd7d2ab7294c433ecada564cbd4f1a"></a>
const size_t&#160;</td><td class="memItemRight" valign="bottom"><b>SPI_TRANSFER_SIZE_MIN</b> = 16</td></tr>
<tr class="separator:a72dd7d2ab7294c433ecada564cbd4f1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72641ff80fea89c133753fcc5992b795"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a72641ff80fea89c133753fcc5992b795"></a>
const size_t&#160;</td><td class="memItemRight" valign="bottom"><b>SPI_TRANSFER_SIZE_MAX</b> = 4096</td></tr>
<tr class="separator:a72641ff80fea89c133753fcc5992b795"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b163b45a99fb92a57e3a802b0745117"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7b163b45a99fb92a57e3a802b0745117"></a>
const size_t&#160;</td><td class="memItemRight" valign="bottom"><b>SPI_TRANSFER_SIZE_DEFAULT</b> = 200</td></tr>
<tr class="separator:a7b163b45a99fb92a57e3a802b0745117"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48b4638c417696245e7aa0d5c1a090b3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a48b4638c417696245e7aa0d5c1a090b3"></a>
const size_t&#160;</td><td class="memItemRight" valign="bottom"><b>PACKET_BUFFER_SIZE</b> = 256*256*4</td></tr>
<tr class="separator:a48b4638c417696245e7aa0d5c1a090b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e9697ba213c3b2ef5ed6d20a31d926c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6e9697ba213c3b2ef5ed6d20a31d926c"></a>
const size_t&#160;</td><td class="memItemRight" valign="bottom"><b>PACKET_HEADER_LENGTH</b> = sizeof(packet_header)</td></tr>
<tr class="separator:a6e9697ba213c3b2ef5ed6d20a31d926c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a102a921d533e16c08ca82a2484946d4d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a102a921d533e16c08ca82a2484946d4d"></a>
const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>PACKET_SIGNATURE</b> [3] = { 0x20, 0x16, 0xAA }</td></tr>
<tr class="separator:a102a921d533e16c08ca82a2484946d4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:aa1cb135d74d590fad71f499008a8a432"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa1cb135d74d590fad71f499008a8a432"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>spi_transfer_thread</b> ()</td></tr>
<tr class="separator:aa1cb135d74d590fad71f499008a8a432"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4d12c6ba607209d0a3e84e19a2d66f8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac4d12c6ba607209d0a3e84e19a2d66f8"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>spi_packet_thread</b> ()</td></tr>
<tr class="separator:ac4d12c6ba607209d0a3e84e19a2d66f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5dd008e17ff7e7e9b66879d4d94b93aa"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5dd008e17ff7e7e9b66879d4d94b93aa"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>spi_cs_high</b> ()</td></tr>
<tr class="separator:a5dd008e17ff7e7e9b66879d4d94b93aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80ca25c3b393ef241373fec7518d0c77"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a80ca25c3b393ef241373fec7518d0c77"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>spi_cs_low</b> ()</td></tr>
<tr class="separator:a80ca25c3b393ef241373fec7518d0c77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1427c5fd9ea9d0dca6127bbe2a17e56f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1427c5fd9ea9d0dca6127bbe2a17e56f"></a>
virtual bool&#160;</td><td class="memItemRight" valign="bottom"><b>spi_transfer_trigger</b> ()</td></tr>
<tr class="separator:a1427c5fd9ea9d0dca6127bbe2a17e56f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab17642d3a04099dcc2d75c3da851830a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab17642d3a04099dcc2d75c3da851830a"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>save_rx_buf</b> ()</td></tr>
<tr class="separator:ab17642d3a04099dcc2d75c3da851830a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7de1716c9c603d7dc6c89f6e39f64ada"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7de1716c9c603d7dc6c89f6e39f64ada"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>rtc_sleep_usec</b> (uint32_t u_sec)</td></tr>
<tr class="separator:a7de1716c9c603d7dc6c89f6e39f64ada"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9864ee8720a11d3c2b7e13f15bb14e4f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9864ee8720a11d3c2b7e13f15bb14e4f"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>queue_packet_buffer</b> ()</td></tr>
<tr class="separator:a9864ee8720a11d3c2b7e13f15bb14e4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cddac910473d445bf8d8de81387fa6b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6cddac910473d445bf8d8de81387fa6b"></a>
virtual size_t&#160;</td><td class="memItemRight" valign="bottom"><b>transfer_callback</b> ()</td></tr>
<tr class="separator:a6cddac910473d445bf8d8de81387fa6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afefd0d4057d4b74fefabd26215b82c57"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afefd0d4057d4b74fefabd26215b82c57"></a>
virtual bool&#160;</td><td class="memItemRight" valign="bottom"><b>check_header</b> (uint8_t *p)</td></tr>
<tr class="separator:afefd0d4057d4b74fefabd26215b82c57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea8fb267ce7570a6d1b25541fda65145"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aea8fb267ce7570a6d1b25541fda65145"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>header_callback</b> (size_t rx_offset, packet_header *p)</td></tr>
<tr class="separator:aea8fb267ce7570a6d1b25541fda65145"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7f69b240b3d6693acf5b94c8b946f1f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af7f69b240b3d6693acf5b94c8b946f1f"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>command_callback</b> (uint8_t command, uint8_t a, uint8_t b)</td></tr>
<tr class="separator:af7f69b240b3d6693acf5b94c8b946f1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88a11a0fdc560d3fee6ae8b58a25ed4b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a88a11a0fdc560d3fee6ae8b58a25ed4b"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>packet_callback</b> (size_t rx_offset)</td></tr>
<tr class="separator:a88a11a0fdc560d3fee6ae8b58a25ed4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a993fcb0888a6f23fc656fc006f832c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6a993fcb0888a6f23fc656fc006f832c"></a>
uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><b>get_rx_buffer</b> ()</td></tr>
<tr class="separator:a6a993fcb0888a6f23fc656fc006f832c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad376b8ef8d0b7ec44b93551450e5bdb9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad376b8ef8d0b7ec44b93551450e5bdb9"></a>
uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><b>get_tx_buffer</b> ()</td></tr>
<tr class="separator:ad376b8ef8d0b7ec44b93551450e5bdb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe7285e8cbf142c5f437618d122818d4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afe7285e8cbf142c5f437618d122818d4"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>get_transfer_size</b> ()</td></tr>
<tr class="separator:afe7285e8cbf142c5f437618d122818d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98e16e6c1e2977918f19a9718be611c0"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a98e16e6c1e2977918f19a9718be611c0"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>set_transfer_size</b> (uint32_t s)</td></tr>
<tr class="separator:a98e16e6c1e2977918f19a9718be611c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a981505d8e5decdad3c03b3accacdf96e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a981505d8e5decdad3c03b3accacdf96e"></a>
uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><b>get_packet_buffer</b> ()</td></tr>
<tr class="separator:a981505d8e5decdad3c03b3accacdf96e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05806f4624c4173bbd7c734b9050969a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a05806f4624c4173bbd7c734b9050969a"></a>
size_t&#160;</td><td class="memItemRight" valign="bottom"><b>get_packet_length</b> ()</td></tr>
<tr class="separator:a05806f4624c4173bbd7c734b9050969a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-static-methods"></a>
Static Protected Member Functions</h2></td></tr>
<tr class="memitem:aa0b0ebc107f2a0986dc17935f5a3d851"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa0b0ebc107f2a0986dc17935f5a3d851"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><b>write_hex</b> (const char *filepath, const uint8_t *data, size_t s)</td></tr>
<tr class="separator:aa0b0ebc107f2a0986dc17935f5a3d851"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabd53b8fbebcf77e5441fb07e5c7a1eb"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aabd53b8fbebcf77e5441fb07e5c7a1eb"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><b>report_error</b> (const char *f_name, int line_num, int err_code)</td></tr>
<tr class="separator:aabd53b8fbebcf77e5441fb07e5c7a1eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ae79e068e1bea91488c8d365df2e72c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6ae79e068e1bea91488c8d365df2e72c"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>report_warning</b> (const char *f_name, int line_num, const char *text)</td></tr>
<tr class="separator:a6ae79e068e1bea91488c8d365df2e72c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:abe8d9ea9ca05ad5cf8f31ecdac6be949"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abe8d9ea9ca05ad5cf8f31ecdac6be949"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>dev_file</b></td></tr>
<tr class="separator:abe8d9ea9ca05ad5cf8f31ecdac6be949"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab7437e9f8568013fe5f488901bb3b98"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aab7437e9f8568013fe5f488901bb3b98"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>mode</b></td></tr>
<tr class="separator:aab7437e9f8568013fe5f488901bb3b98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9204bf2cfd840251b6ebed4efeca0075"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9204bf2cfd840251b6ebed4efeca0075"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>bits</b></td></tr>
<tr class="separator:a9204bf2cfd840251b6ebed4efeca0075"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43c9a53df7a13ec5a01d5c6d4eadf2b1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a43c9a53df7a13ec5a01d5c6d4eadf2b1"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>clock</b></td></tr>
<tr class="separator:a43c9a53df7a13ec5a01d5c6d4eadf2b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6815f7ffed0ca9f7a051a8608ad4a11f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6815f7ffed0ca9f7a051a8608ad4a11f"></a>
std::thread *&#160;</td><td class="memItemRight" valign="bottom"><b>th_transfer</b></td></tr>
<tr class="separator:a6815f7ffed0ca9f7a051a8608ad4a11f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7334ad77c2b6ec9460e6f76cf8e4b289"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7334ad77c2b6ec9460e6f76cf8e4b289"></a>
std::thread *&#160;</td><td class="memItemRight" valign="bottom"><b>th_packet</b></td></tr>
<tr class="separator:a7334ad77c2b6ec9460e6f76cf8e4b289"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a486f2d4ddf22660d9c5a6d02b013c7d3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a486f2d4ddf22660d9c5a6d02b013c7d3"></a>
std::mutex&#160;</td><td class="memItemRight" valign="bottom"><b>section_transfer</b></td></tr>
<tr class="separator:a486f2d4ddf22660d9c5a6d02b013c7d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a719ef7c07465fe96b4005f2b2334eaea"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a719ef7c07465fe96b4005f2b2334eaea"></a>
std::mutex&#160;</td><td class="memItemRight" valign="bottom"><b>section_tx_buffer</b></td></tr>
<tr class="separator:a719ef7c07465fe96b4005f2b2334eaea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a794354fb1700dd938eb7d85b44f9c3cf"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a794354fb1700dd938eb7d85b44f9c3cf"></a>
std::mutex&#160;</td><td class="memItemRight" valign="bottom"><b>section_packet_queue</b></td></tr>
<tr class="separator:a794354fb1700dd938eb7d85b44f9c3cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa12e4789caff1314f417d16d78c16d40"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa12e4789caff1314f417d16d78c16d40"></a>
std::atomic&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>control_quit</b></td></tr>
<tr class="separator:aa12e4789caff1314f417d16d78c16d40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a924b6cf595a348f8fbb90ca0ff7eeaa3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a924b6cf595a348f8fbb90ca0ff7eeaa3"></a>
volatile uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>trigger_counter</b></td></tr>
<tr class="separator:a924b6cf595a348f8fbb90ca0ff7eeaa3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd6ef27a21c8cc02f897d0b553b30955"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acd6ef27a21c8cc02f897d0b553b30955"></a>
volatile uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>transfer_counter</b></td></tr>
<tr class="separator:acd6ef27a21c8cc02f897d0b553b30955"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab696c0bf6731fd754041ea3927ad7dc3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab696c0bf6731fd754041ea3927ad7dc3"></a>
volatile uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>tx_swap_counter</b></td></tr>
<tr class="separator:ab696c0bf6731fd754041ea3927ad7dc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4206dae113bc4dfe7ffb564d5b14bb97"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4206dae113bc4dfe7ffb564d5b14bb97"></a>
volatile uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>signature_counter</b></td></tr>
<tr class="separator:a4206dae113bc4dfe7ffb564d5b14bb97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a617f245e0dd82c72c241c184d81348f7"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a617f245e0dd82c72c241c184d81348f7"></a>
volatile uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>header_counter</b></td></tr>
<tr class="separator:a617f245e0dd82c72c241c184d81348f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa90caa0dea05b98f72473ca006452dcb"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa90caa0dea05b98f72473ca006452dcb"></a>
volatile uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>packet_counter</b></td></tr>
<tr class="separator:aa90caa0dea05b98f72473ca006452dcb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f54b592d363be11c617ce4949606556"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6f54b592d363be11c617ce4949606556"></a>
std::list&lt; packet * &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>packet_queue</b></td></tr>
<tr class="separator:a6f54b592d363be11c617ce4949606556"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>the object-oriented interface of the spi bus </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a76a5d8a500041d2514a3b0dd720adf03"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int scamp5c_spi::OpenSPI </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>dev_path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>d_clk</em> = <code>2500000</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>open the spi interface </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev_path</td><td>the file device path of the spidev </td></tr>
    <tr><td class="paramname">d_clk</td><td>the data clock frequency of the spi bus</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if successful, -1 otherwise </dd></dl>

</div>
</div>
<a class="anchor" id="a5191ec15c3cdc6f37ed45bc07b1e1815"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int scamp5c_spi::StartThreads </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>start running the internal functions in different threads </p>
<p>This function starts the whole mechanism. </p>

</div>
</div>
<a class="anchor" id="a8a6da7cea09fe19b8ba35ce5385371c0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int scamp5c_spi::EndThreads </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>stop the interface and close all threads created in the background </p>
<p>This function stops the whole mechanism. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="a00010_source.html">scamp5c_spi.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Jun 22 2016 13:28:18 for SCAMP-5c SPI Interface by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.10
</small></address>
</body>
</html>
